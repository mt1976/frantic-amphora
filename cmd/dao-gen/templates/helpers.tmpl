package {{.PackageName}}

import (
	"context"
	"fmt"

	ce "github.com/mt1976/frantic-core/commonErrors"
	"github.com/mt1976/frantic-amphora/dao/entities"
)

// upgradeProcessing performs any one-time upgrade or migration logic on the record.
func (record *{{.TypeName}}) upgradeProcessing() error {
	return nil
}

// defaultProcessing applies any default values prior to validation and persistence.
func (record *{{.TypeName}}) defaultProcessing() error {
	return nil
}

// validationProcessing validates the record and returns an error if it is invalid.
func (record *{{.TypeName}}) validationProcessing() error {
	return nil
}

// postGetProcessing runs any post-load processing after a record is retrieved.
func (h *{{.TypeName}}) postGetProcessing() error {
	return nil
}

// preDeleteProcessing runs any checks or actions required before delete.
func (record *{{.TypeName}}) preDeleteProcessing() error {
	return nil
}

// templateClone contains the package's clone logic.
func templateClone(ctx context.Context, source {{.TypeName}}) ({{.TypeName}}, error) {
	_ = ctx
	_ = source
	panic("Not Implemented")
}

// assert{{.TypeName}} asserts that an `any` returned by lower layers is a *{{.TypeName}}.
func assert{{.TypeName}}(result any, field entities.Field, value any) (*{{.TypeName}}, error) {
	x, ok := result.(*{{.TypeName}})
	if !ok {
		return nil, ce.ErrDAOAssertWrapper(tableName, field.String(), value,
			ce.ErrInvalidTypeWrapper(field.String(), fmt.Sprintf("%T", result), "*{{.TypeName}}"))
	}
	return x, nil
}
